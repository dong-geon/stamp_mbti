<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8LJT8DH2PZ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-8LJT8DH2PZ');
    </script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>우표 MBTI테스트</title>
    <meta name="description" content="우표로 당신과 닮은 동식물을 MBTI를 기반으로 알아보는 테스트입니다.">
    <meta property="og:type" content="website"> 
    <meta property="og:title" content="우표 MBTI테스트">
    <meta property="og:description" content="우표로 당신과 닮은 동식물을 MBTI를 기반으로 알아보는 테스트입니다.">
    
    <!-- netlify를 이용한 배포 -->
    <meta property="og:image" content="https://stampmbti.netlify.app/image/main제비.png">
    <meta property="og:url" content="https://stampmbti.netlify.app">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    
    <link rel="stylesheet" href="/style.css">
</head>
<body class="all mainB">
    <!-- 메인화면 -->
    <article class="article start">
        <img id="mode" class="mainimgPC mt-5" src="/image/main제비.png" alt="main">
        <button id="startButton" type="button" class="qbtnPC btn btn-outline-dark mt-5" onclick="start();">시작하기</button>
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
        <!-- ADDTHIS를 이용한 공유기능 -->
        <h2 style="text-shadow: 2px 2px 2px #272525;" class="mt-5">테스트 공유하기</h2>
        <div class="addthis_inline_share_toolbox_pqcd mt-4 share"></div>
    </article>
    
    <!-- 질문화면 -->
    <article class="article question">
        <div id="number" class="numberPC mt-5">1/12</div>
        <div id="progress" class="pgrPC progress mt-2">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: calc(100/12*1%)"></div>
        </div>
        <h2 id="title" class="questionPC text-center mt-5">문제</h2>
        <input id="type" type="hidden" value="EI">
        <button id="A" type="button" class="qbtnPC btn btn-outline-dark mt-5">질문1</button><br>
        <button id="B" type="button" class="qbtnPC btn btn-outline-dark mt-4">질문2</button>
    </article>

    <!-- 에피소드 -->
    <article id="fade" class="article episode">
        <h1 id="episode" class="text-center mt-5">에피소드 번호</h1>
        <h2 id="epcontent" class="epcontentPC back text-center mt-5">에피소드 내용</h2>
        <img id="epImage" class="epimg mt-5" src="/image/EP1.png">
        <button id="epbutton" type="button" class="qbtnPC btn btn-outline-dark mt-5" onclick="episode();">다음</button>
    </article>

    <input type="hidden" id="EI" value="0">
    <input type="hidden" id="SN" value="0">
    <input type="hidden" id="TF" value="0">
    <input type="hidden" id="JP" value="0">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" 
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" 
        crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>

    <script>
        // 모바일 접속 시
        var filter = "win16|win32|win64|mac|macintel";
        if ( navigator.platform ) {
            if ( filter.indexOf( navigator.platform.toLowerCase() ) < 0 ) {
                $('#mode').attr('class','mainimgMobile mt-5');
                $('#title').attr('class','questionMobile text-center mt-5');
                $('#number').attr('class','numberMobile mt-5');
                $('#progress').attr('class','pgrMobile progress mt-2');
                $('#startbutton').attr('class','btn btn-outline-dark mt-5');
                $('epbutton').attr('class','btn btn-outline-dark mt-5');
                $('#A').attr('class','btn btn-light mt-5');
                $('#B').attr('class','btn btn-light mt-3');
                $('#A').attr('style','width:280px;');
                $('#B').attr('style','width:280px;');
                $('#epcontent').attr('class','epcontentMobile back text-center mt-5');
                // $('#progress').attr('class','progressMobile mt-5');
            }
        }
        let num = 1;
        let question = {
            1: {"title":"편지지를 사러 왔지만 원하는<br>편지지 디자인이 보이지 않습니다.", "type":"EI", "A":"'저기요!'<br>바로 직원을 찾아 물어본다", "B":"'여기있나...?'<br>혼자 조금 더 찾아본다"},
            2: {"title":"다양한 종류의 편지지가 있습니다.<br>어떤 것을 고를까요?", "type":"SN", "A":"가장 인기있는 편지지", "B":"내 눈에 제일 이쁜 편지지"},
            3: {"title":"누가 봐도 이쁜 디자인의 편지지가<br>잘 보이지 않는 곳에 있어<br>팔리지 않고 있습니다.", "type":"TF", "A":"'이걸 왜 여기에 두지?'<br>진열 위치에 의문을 가짐", "B":"'오! 찾았다.'<br>이쁜 편지지를 찾은 것에 기쁨"},
            4: {"title":"우연히 가게 앞에서 만난 친구가<br>방금 전 실수로 가게 물건을 파손해<br>5만원을 물어줬다고 합니다.", "type":"TF", "A":"'뭘 파손했는데?'<br>먼저 어떤 걸 파손했는지 물어본다", "B":"'진짜? 아이고....'<br>친구를 위로한다"},
            5: {"title":"편지지 포장을 뜯으니 안에<br>총 다섯 장의 편지지가 들어 있습니다.", "type":"EI", "A":"이왕 산 김에 다른 친구들에게 편지를 모두 쓴다.", "B":"원래 쓰려던 한 사람에게만 쓴다"},
            6: {"title":"이제 당신은 편지를 쓰기 위해<br>펜을 들었습니다.", "type":"JP", "A":"미리 생각해 놓았던 내용을 적음", "B":"먼저 편지지를 펼쳐 놓고 생각"},
            7: {"title":"편지를 쓰던 도중 다른 친구에게<br>시험을 망쳤다는 연락이 왔습니다.<br>뭐라고 말할까요?", "type":"TF", "A":"'몇 점 받았길래 그래?'<br>점수를 물어본다", "B":"'괜찮아? 다음엔 잘 볼 거야.'<br>일단 위로를 한다"},
            8: {"title":"대화가 끝나고 당신과 친구는 다음<br>주에 만나서 밥을 먹기로 했습니다.", "type":"JP", "A":"날짜, 시간, 메뉴 등 정할 수 있는 것은<br>미리 정한다", "B":"대충 날짜만 정하고 나머지는<br>나중에 생각한다"},
            9: {"title":"당신은 편지를 보낸 다음 남은<br>하루를 어떻게 보낼지 고민됩니다.", "type":"EI", "A":"외출한 김에 친구들을 불러서 논다", "B":"다시 집으로 돌아와 편하게 쉰다"},
            10: {"title":"대략적인 위치는 알지만<br>한 번도 가본 적 없는 우체국입니다.<br>어떻게 찾아갈까요?", "type":"JP", "A":"어플로 위치와 경로를<br>정확히 확인하고 감", "B":"일단 나감"},
            11: {"title":"항상 타던 버스를 놓친 당신.<br>목적지까지 노선이 같은 버스가 왔지만<br>처음 보는 버스입니다.", "type":"SN", "A":"시간이 더 걸려도<br>항상 타던 버스를 기다린다", "B":"처음 보는 버스를 타고 간다"},
            12: {"title":"버스에서 내려 길을 걷던 중<br>누군가 나에게 길을 물어봅니다.<br>다행히도 내가 아는 곳입니다.", "type":"SN", "A":"현재 위치에서부터<br>구체적으로 가는 길을 설명해준다", "B":"목적지 주변<br>큰 건물을 기준으로 알려준다"}
        }
        let ep = {
            1: {"episode":"Episode 1.", "content":"오랜만에 고마운 친구에게<br>손 편지를 쓰기로 마음먹은 당신은<br>편지지를 사러 밖으로 나섭니다."},
            2: {"episode":"Episode 2.", "content":"편지지를 산 당신은<br>다시 집으로 돌아왔습니다.<br>편지지를 꺼내볼까요?"},
            3: {"episode":"Episode 3.", "content":"편지를 다 쓴 당신.<br>집 근처 우체국으로 가기 위해<br>준비합니다."},
            4: {"episode":"Episode 4.", "content":"우체국에 도착한 당신.<br>이제 편지에 우표를 붙일 차례입니다.<br>당신과 잘 어울리는 우표는<br>어떤 우표일까요?"}    
        }

        // 시작버튼 클릭 시
        function start() {
            $(".start").hide();
            // $(".footer").hide();
            $(".question").show();
            next();
        }

        // 질문 답변 위
        $("#A").click(function(){
            let type = $("#type").val();
            let preValue = $("#"+type).val();
            $("#"+type).val(parseInt(preValue)+1);
            next();
            console.log(type, preValue)
        });

        // 질문 답변 아래
        $("#B").click(function(){
            next();
        });

        // 에피소드 다음 클릭 시
        function episode() {
            $(".question").show();
            $(".episode").hide();
        }

        // 결과에 따른 화면 출력
        function result() {
            let mbti = "";
            ($("#EI").val() >= 2 ? mbti +="E" : mbti +="I");
            ($("#SN").val() >= 2 ? mbti +="S" : mbti +="N");
            ($("#TF").val() >= 2 ? mbti +="T" : mbti +="F");
            ($("#JP").val() >= 2 ? mbti +="J" : mbti +="P");
            if(mbti=="ESTJ")
                location.href = './result1.html'
            else if(mbti == "ESTP")
                location.href = '/result2.html'
            else if(mbti == "ESFJ")
                location.href = '/result3.html'
            else if(mbti == "ESFP")
                location.href = '/result4.html'
            else if(mbti == "ENTJ")
                location.href = '/result5.html'
            else if(mbti == "ENTP")
                location.href = '/result6.html'
            else if(mbti == "ENFJ")
                location.href = '/result7.html'
            else if(mbti == "ENFP")
                location.href = '/result8.html'
            else if(mbti == "ISTJ")
                location.href = '/result9.html'
            else if(mbti == "ISTP")
                location.href = '/result10.html'
            else if(mbti == "ISFJ")
                location.href = '/result11.html'
            else if(mbti == "ISFP")
                location.href = '/result12.html'
            else if(mbti == "INTJ")
                location.href = '/result13.html'
            else if(mbti == "INTP")
                location.href = '/result14.html'
            else if(mbti == "INFJ")
                location.href = '/result15.html'
            else // INFP
                location.href = '/result16.html'
        }

        // 상황에 따른 다음버튼 클릭 시 행동
        function next() {
            // EPISODE 1
            if (num == 1){
                $(".question").hide();
                $(".episode").show();
                $("#episode").html(ep[1]["episode"]);
                $("#epcontent").html(ep[1]["content"]);
                $("#epImage").attr('src','/image/EP1.png')
            }
            // EPSODE 2
            else if (num == 5) {
                $(".question").hide();
                $(".episode").show();
                $("#episode").html(ep[2]["episode"]);
                $("#epcontent").html(ep[2]["content"]);
                $("#epImage").attr('src','/image/EP2.png')
            }
            // EPISODE 3
            else if (num == 9) {
                $(".question").hide();
                $(".episode").show();
                $("#episode").html(ep[3]["episode"]);
                $("#epcontent").html(ep[3]["content"]);
                $("#epImage").attr('src','/image/EP3.png')
            }
            // EPISODE 4
            if (num >= 13) {
                $(".question").hide();
                $(".episode").show();
                $("#episode").html(ep[4]["episode"]);
                $("#epcontent").html(ep[4]["content"]);
                $("#epbutton").attr('onclick', 'result();');
                $("#epImage").attr('src','/image/EP4.png')
                $("#button").html("결과 보기");
                
            }
            //QUESTION
            else{
                $("#number").html(num+'/12');
                $(".progress-bar").attr('style','width: calc(100/12*'+num+'%)')
                $("#title").html(question[num]["title"]);
                $("#type").val(question[num]["type"]);
                $("#A").html(question[num]["A"]);
                $("#B").html(question[num]["B"]);
                num++;
            }
        }
    </script>

    <!-- Go to www.addthis.com/dashboard to customize your tools -->
    <!-- ADDTHIS -->
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-6098ffbd5211cf4c"></script>

</body>
</html>